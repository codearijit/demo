{"version":3,"file":"component---packages-gatsby-theme-newrelic-src-pages-404-js.js","mappings":"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","sources":["webpack://demo/../packages/gatsby-theme-newrelic/src/pages/404.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from '@emotion/react';\r\nimport { navigate } from 'gatsby-link';\r\nimport { graphql, useStaticQuery } from 'gatsby';\r\n\r\nimport GlobalHeader from '../components/GlobalHeader';\r\nimport GlobalFooter from '../components/GlobalFooter';\r\nimport Link from '../components/Link';\r\nimport SearchInput from '../components/SearchInput';\r\nimport Tag from '../components/Tag';\r\nimport CreateIssueButton from '../components/CreateIssueButton';\r\nimport Button from '../components/Button';\r\nimport getLocale from '../../gatsby/utils/getLocale';\r\nimport useThemeTranslation from '../hooks/useThemeTranslation';\r\nimport Trans from '../components/Trans';\r\nimport useTessen from '../hooks/useTessen';\r\n\r\nconst NotFoundPage = ({\r\n  location,\r\n  pageContext: { themeOptions, swiftypeEngineKey },\r\n}) => {\r\n  const {\r\n    site: {\r\n      siteMetadata: { siteUrl },\r\n    },\r\n  } = useStaticQuery(graphql`\r\n    query {\r\n      site {\r\n        siteMetadata {\r\n          siteUrl\r\n        }\r\n      }\r\n    }\r\n  `);\r\n  const { t: translate } = useThemeTranslation();\r\n  const [searchTerm, setSearchTerm] = useState(null);\r\n  const [searchResult, setSearchResult] = useState(null);\r\n  const tessen = useTessen();\r\n\r\n  const pageLocale = getLocale({ location }, themeOptions);\r\n\r\n  const hostname = new URL(siteUrl).hostname;\r\n  const nrSubDomain = /.*\\.newrelic\\.com/.test(hostname)\r\n    ? hostname.split('.')[0]\r\n    : null;\r\n\r\n  const searchTermFilter = useCallback(\r\n    (term) => {\r\n      const termsToIgnore = ['docs', pageLocale];\r\n\r\n      if (!term || termsToIgnore.includes(term)) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    },\r\n    [pageLocale]\r\n  );\r\n\r\n  const getSearchResults = useCallback(async () => {\r\n    const localePostFix = () => {\r\n      return pageLocale === 'en' ? '' : `-${pageLocale}`;\r\n    };\r\n\r\n    const search = async () => {\r\n      const res = await fetch(\r\n        'https://search-api.swiftype.com/api/v1/public/engines/search.json',\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            q: searchTerm,\r\n            engine_key: swiftypeEngineKey,\r\n            per_page: 5,\r\n            filters: {\r\n              page: {\r\n                type: [\r\n                  `docs${localePostFix()}`,\r\n                  `developers${localePostFix()}`,\r\n                  `opensource${localePostFix()}`,\r\n                  `quickstarts${localePostFix()}`,\r\n                ],\r\n                document_type: [\r\n                  '!views_page_menu',\r\n                  '!term_page_api_menu',\r\n                  '!term_page_landing_page',\r\n                ],\r\n              },\r\n            },\r\n          }),\r\n        }\r\n      );\r\n\r\n      const { records } = await res.json();\r\n\r\n      return records.page;\r\n    };\r\n\r\n    if (searchTerm !== null) {\r\n      const results = await search();\r\n      const trimmedResults = results.map((r) => {\r\n        return { url: r.url, title: r.title, type: r.type };\r\n      });\r\n\r\n      setSearchResult(trimmedResults);\r\n    }\r\n  }, [pageLocale, searchTerm, swiftypeEngineKey]);\r\n\r\n  const displaySearchResults = (locale) => {\r\n    if (!searchResult || searchResult.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div id=\"search-results\">\r\n        {translate('404.searchResultMessage')}\r\n        <ul\r\n          css={css`\r\n            list-style-type: none;\r\n            margin: 0;\r\n            padding: 0;\r\n            line-height: 1.75rem;\r\n            margin-top: 1rem;\r\n          `}\r\n        >\r\n          {searchResult.map((result, index) => {\r\n            return (\r\n              <li key={`result-${index}`}>\r\n                <div>\r\n                  <Link\r\n                    to={result.url}\r\n                    css={css`\r\n                      text-decoration: none;\r\n                    `}\r\n                    instrumentation={{\r\n                      component: '404SuggestedLink',\r\n                      href: result.url,\r\n                      searchTerm,\r\n                    }}\r\n                    displayExternalIcon\r\n                  >\r\n                    {result.title}\r\n                  </Link>\r\n                </div>\r\n                <Tag\r\n                  css={css`\r\n                    font-size: 0.625rem;\r\n                    margin-right: 0.5em;\r\n                  `}\r\n                  uppercase\r\n                >\r\n                  {result.type?.replace(`-${locale}`, '').replace('_', ' ')}\r\n                </Tag>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSearchTerm(\r\n      location.pathname.split('/').filter(searchTermFilter).join(' ')\r\n    );\r\n  }, [searchTermFilter, location.pathname]);\r\n\r\n  useEffect(() => {\r\n    getSearchResults();\r\n  }, [getSearchResults, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    if (searchResult) {\r\n      tessen.track({\r\n        eventName: 'error404',\r\n        category: 'ErrorPage',\r\n        path: location.pathname,\r\n        resultCount: searchResult.length,\r\n        searchTerm,\r\n      });\r\n    }\r\n  }, [location.pathname, searchResult, searchTerm]);\r\n\r\n  return (\r\n    <>\r\n      <GlobalHeader />\r\n      <div\r\n        css={css`\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr 1fr 1fr;\r\n          grid-template-rows: auto;\r\n          grid-template-areas:\r\n            '. . . .'\r\n            '. content content .'\r\n            'footer footer footer footer';\r\n          min-height: calc(100vh - var(--global-header-height));\r\n          max-height: calc(100vh - var(--global-header-height));\r\n        `}\r\n      >\r\n        <div\r\n          css={css`\r\n            display: flex;\r\n            grid-area: content;\r\n            justify-self: start;\r\n          `}\r\n        >\r\n          <div\r\n            css={css`\r\n              font-size: 0.85rem;\r\n              padding: 8rem 0;\r\n            `}\r\n          >\r\n            <h1\r\n              css={css`\r\n                font-weight: normal;\r\n                line-height: 1;\r\n              `}\r\n            >\r\n              {translate('404.headingText')}\r\n            </h1>\r\n\r\n            <div\r\n              id=\"search-section\"\r\n              css={css`\r\n                margin-top: 2rem;\r\n                margin-bottom: 2rem;\r\n              `}\r\n            >\r\n              {translate('404.searchInputLabel')}\r\n              <SearchInput\r\n                placeholder={searchTerm}\r\n                onFocus={() =>\r\n                  navigate(`?q=${searchTerm.replaceAll(' ', '+')}`)\r\n                }\r\n                css={css`\r\n                  min-width: 200px;\r\n                  max-width: 2000px;\r\n                  margin-top: 0.5rem;\r\n                  margin-bottom: 0.5rem;\r\n                `}\r\n              />\r\n            </div>\r\n            {displaySearchResults(pageLocale)}\r\n\r\n            <div\r\n              css={css`\r\n                > * {\r\n                  margin: 3em 0;\r\n                }\r\n              `}\r\n            >\r\n              {/* <p>\r\n                {translate('404.docsHomeMessage')}{' '}\r\n                <Link to=\"/\">{{nrSubDomain}} home</Link>.\r\n              </p> */}\r\n              <Trans i18nKey=\"404.docsHomeMessage\" parent=\"p\">\r\n                Go back to <Link to=\"/\">{{ nrSubDomain }} home</Link>.\r\n              </Trans>\r\n              <p>\r\n                {translate('404.fileIssueMessage')}{' '}\r\n                <CreateIssueButton\r\n                  pageTitle=\"404\"\r\n                  variant={Button.VARIANT.OUTLINE}\r\n                  size={Button.SIZE.SMALL}\r\n                  labels={['bug', '404']}\r\n                  instrumentation={{ component: '404Page' }}\r\n                  css={css`\r\n                    margin-left: 1em;\r\n                  `}\r\n                />\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <GlobalFooter\r\n          css={css`\r\n            grid-area: footer;\r\n            align-self: end;\r\n          `}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nNotFoundPage.propTypes = {\r\n  location: PropTypes.shape({\r\n    href: PropTypes.string.isRequired,\r\n    origin: PropTypes.string.isRequired,\r\n    pathname: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  pageContext: PropTypes.shape({\r\n    themeOptions: PropTypes.object.isRequired,\r\n    swiftypeEngineKey: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default NotFoundPage;\r\n"],"names":["React","useEffect","useState","useCallback","PropTypes","css","navigate","GlobalHeader","GlobalFooter","Link","SearchInput","Tag","CreateIssueButton","Button","getLocale","useThemeTranslation","Trans","useTessen","NotFoundPage","location","pageContext","themeOptions","swiftypeEngineKey","site","siteMetadata","siteUrl","t","translate","searchTerm","setSearchTerm","searchResult","setSearchResult","tessen","pageLocale","hostname","URL","nrSubDomain","test","split","searchTermFilter","term","termsToIgnore","includes","getSearchResults","localePostFix","search","res","fetch","method","headers","body","JSON","stringify","q","engine_key","per_page","filters","page","type","document_type","records","json","results","trimmedResults","map","r","url","title","displaySearchResults","locale","length","result","index","component","href","replace","pathname","filter","join","track","eventName","category","path","resultCount","replaceAll","VARIANT","OUTLINE","SIZE","SMALL","propTypes","shape","string","isRequired","origin","object"],"sourceRoot":""}